<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Agenda | Nobreak Company</title>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

<style>
  @font-face{
    font-family:"Rokiest";
    src:url("https://raw.githubusercontent.com/WAYCOMPANYGG/roteiro/main/assets/fonts/Rokiest-Extrabold.otf") format("opentype");
    font-weight:800; font-display:swap;
  }

  :root{
    --bg:#0a0f1a;
    --bg-secondary:#111827;
    --surface:#1a1f2e;
    --surface-elevated:#252b3b;
    
    --border:rgba(255,255,255,.08);
    --border-light:rgba(255,255,255,.12);
    --border-hover:rgba(99,102,241,.5);
    
    --text:#f8fafc;
    --text-secondary:#e2e8f0;
    --text-muted:#94a3b8;
    --text-dim:#64748b;
    
    --primary:#6366f1;
    --primary-light:#818cf8;
    --primary-dark:#4f46e5;
    --accent:#06b6d4;
    --accent-light:#22d3ee;
    --success:#10b981;
    --warning:#f59e0b;
    --danger:#ef4444;
    
    --shadow-sm:0 2px 8px rgba(0,0,0,.3);
    --shadow-md:0 8px 24px rgba(0,0,0,.4);
    --shadow-lg:0 20px 40px rgba(0,0,0,.5);
    
    --radius-lg:16px;
    --radius-md:12px;
    --radius-sm:8px;
  }

  *{box-sizing:border-box; margin:0; padding:0}
  
  html,body{
    height:100%;
    font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    color:var(--text);
    background:var(--bg);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .container{
    max-width:1600px;
    margin:0 auto;
    padding:24px;
    animation:fadeIn .6s ease;
  }

  @keyframes fadeIn{
    from{ opacity:0; transform:translateY(10px); }
    to{ opacity:1; transform:translateY(0); }
  }

  /* Header */
  .header{
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius-lg);
    padding:24px 32px;
    margin-bottom:24px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:20px;
    flex-wrap:wrap;
    animation:slideDown .5s ease;
  }

  @keyframes slideDown{
    from{ opacity:0; transform:translateY(-20px); }
    to{ opacity:1; transform:translateY(0); }
  }

  .brand{
    display:flex;
    align-items:center;
    gap:20px;
  }

  .logo{
    display:flex;
    align-items:center;
    gap:2px;
    font-family:'Rokiest', sans-serif;
    font-size:22px;
    letter-spacing:0.5px;
    color:var(--text);
  }

  .logo-k{position:relative; margin-right:-3px}

  .logo-lightning{
    position:absolute;
    right:-6px;
    top:50%;
    transform:translateY(-50%);
    width:16px;
    filter:drop-shadow(0 0 8px #ffd700);
  }

  .header-titles h1{
    font-family:'Space Grotesk', sans-serif;
    font-size:24px;
    font-weight:600;
    letter-spacing:-0.3px;
    margin-bottom:4px;
    color:var(--text);
  }

  .header-sub{
    font-size:13px;
    color:var(--text-dim);
    font-weight:500;
  }

  .header-actions{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }

  /* Search */
  .search{
    display:flex;
    align-items:center;
    gap:12px;
    padding:0 16px;
    height:44px;
    min-width:320px;
    border-radius:999px;
    border:1px solid var(--border);
    background:var(--surface-elevated);
    transition:all .2s;
  }

  .search:focus-within{
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(99,102,241,.15);
  }

  .search svg{
    opacity:.5;
    transition:opacity .2s;
  }

  .search:focus-within svg{
    opacity:1;
  }

  .search input{
    flex:1;
    border:0;
    outline:0;
    background:transparent;
    color:var(--text);
    font-weight:500;
    font-size:14px;
  }

  .search-clear{
    border:0;
    background:transparent;
    color:var(--text-dim);
    cursor:pointer;
    display:grid;
    place-items:center;
    width:28px;
    height:28px;
    border-radius:50%;
    transition:all .2s;
    opacity:0;
    pointer-events:none;
  }

  .search.has-value .search-clear{
    opacity:1;
    pointer-events:auto;
  }

  .search-clear:hover{
    background:rgba(255,255,255,.08);
    color:var(--text);
  }

  .search input::placeholder{
    color:var(--text-dim);
  }

  /* Buttons */
  .btn{
    height:44px;
    border-radius:999px;
    border:1px solid var(--border);
    background:var(--surface-elevated);
    color:var(--text);
    font-weight:600;
    font-size:14px;
    padding:0 20px;
    cursor:pointer;
    transition:all .2s;
    display:inline-flex;
    align-items:center;
    gap:8px;
    white-space:nowrap;
  }

  .btn:focus-visible,
  .nav-btn:focus-visible,
  .chip:focus-visible,
  .day:focus-visible{
    outline:2px solid var(--primary);
    outline-offset:2px;
  }

  .btn:hover{
    transform:translateY(-1px);
    border-color:var(--border-light);
    box-shadow:var(--shadow-sm);
  }

  .btnPrimary{
    background:var(--primary);
    border-color:var(--primary);
    color:#fff;
    font-weight:700;
  }

  .btnPrimary:hover{
    background:var(--primary-dark);
    box-shadow:var(--shadow-md);
  }

  /* Toolbar */
  .toolbar{
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius-lg);
    padding:20px 24px;
    margin-bottom:24px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    flex-wrap:wrap;
    animation:slideUp .6s ease .1s both;
  }

  @keyframes slideUp{
    from{ opacity:0; transform:translateY(20px); }
    to{ opacity:1; transform:translateY(0); }
  }

  .toolbar-left,
  .toolbar-center,
  .toolbar-right{
    display:flex;
    align-items:center;
    gap:12px;
  }

  .select{
    height:40px;
    border-radius:999px;
    border:1px solid var(--border);
    background:var(--surface-elevated);
    color:var(--text);
    padding:0 40px 0 16px;
    outline:none;
    font-weight:600;
    font-size:14px;
    cursor:pointer;
    transition:all .2s;
    appearance:none;
    background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 7.5L10 12.5L15 7.5' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat:no-repeat;
    background-position:right 12px center;
  }

  .select:hover{
    border-color:var(--border-light);
  }

  .select:focus{
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(99,102,241,.15);
  }

  /* Chips */
  .chips{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }

  .chip{
    height:32px;
    border-radius:999px;
    border:1px solid var(--border);
    background:var(--surface-elevated);
    padding:0 14px;
    display:inline-flex;
    align-items:center;
    gap:8px;
    font-weight:600;
    font-size:12px;
    cursor:pointer;
    transition:all .2s;
  }

  .chip:hover{
    transform:translateY(-1px);
    border-color:var(--border-light);
  }

  .chip .dot{
    width:8px;
    height:8px;
    border-radius:50%;
    background:currentColor;
  }

  .chip.active{
    border-color:var(--primary);
    background:rgba(99,102,241,.15);
  }

  /* Month Navigation */
  .month-nav{
    display:flex;
    align-items:center;
    gap:16px;
  }

  .month-title{
    font-family:'Space Grotesk', sans-serif;
    font-size:20px;
    font-weight:600;
    min-width:180px;
    text-align:center;
    color:var(--text);
  }

  .nav-btn{
    width:40px;
    height:40px;
    border-radius:var(--radius-sm);
    border:1px solid var(--border);
    background:var(--surface-elevated);
    display:grid;
    place-items:center;
    cursor:pointer;
    transition:all .2s;
    font-size:18px;
  }

  .nav-btn:hover{
    transform:translateY(-1px);
    border-color:var(--border-light);
    background:var(--surface);
  }

  .pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:8px 16px;
    border-radius:999px;
    border:1px solid var(--border);
    background:var(--surface-elevated);
    color:var(--text-secondary);
    font-weight:600;
    font-size:13px;
  }

  /* Calendar */
  .calendar{
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius-lg);
    overflow:hidden;
    animation:slideUp .6s ease .2s both;
  }

  .empty-state{
    padding:24px;
    text-align:center;
    color:var(--text-dim);
    font-weight:600;
    display:none;
  }

  .empty-state.show{
    display:block;
  }

  .weekdays{
    display:grid;
    grid-template-columns:repeat(7, 1fr);
    background:var(--surface-elevated);
    border-bottom:1px solid var(--border);
  }

  .weekdays div{
    padding:16px;
    font-size:12px;
    font-weight:700;
    color:var(--text-dim);
    letter-spacing:0.5px;
    text-transform:uppercase;
    text-align:center;
  }

  .days{
    display:grid;
    grid-template-columns:repeat(7, 1fr);
    min-height:600px;
    gap:1px;
    background:var(--border);
  }

  .day{
    padding:12px;
    background:var(--surface);
    min-height:120px;
    transition:all .25s cubic-bezier(.4,0,.2,1);
    overflow-y:auto;
    scrollbar-width:none;
    -ms-overflow-style:none;
    position:relative;
  }

  .day.has-events::before{
    content:'';
    position:absolute;
    left:12px;
    top:12px;
    width:6px;
    height:6px;
    border-radius:999px;
    background:var(--accent-light);
    box-shadow:0 0 6px rgba(34,211,238,.8);
  }

  .day::-webkit-scrollbar{
    display:none;
  }

  /* Animated + button */
  .day::after{
    content:'Ôºã';
    position:absolute;
    top:10px;
    right:10px;
    width:32px;
    height:32px;
    border-radius:50%;
    background:linear-gradient(135deg, var(--primary), var(--accent));
    color:#fff;
    font-size:20px;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:center;
    opacity:0;
    transform:scale(0.5) rotate(-180deg);
    transition:all .4s cubic-bezier(.34,1.56,.64,1);
    cursor:pointer;
    pointer-events:none;
    box-shadow:0 4px 12px rgba(99,102,241,.4);
    z-index:20;
  }

  .day:hover::after{
    opacity:1;
    transform:scale(1) rotate(0deg);
    pointer-events:auto;
    animation:plusPulse 2s ease-in-out infinite;
  }

  @keyframes plusPulse{
    0%, 100%{ 
      box-shadow:0 4px 12px rgba(99,102,241,.4),
                 0 0 0 0 rgba(99,102,241,.4);
    }
    50%{ 
      box-shadow:0 6px 16px rgba(99,102,241,.6),
                 0 0 0 8px rgba(99,102,241,0);
    }
  }

  .day:hover{
    background:var(--surface-elevated);
    transform:scale(1.02);
    z-index:10;
    box-shadow:0 8px 24px rgba(0,0,0,.3);
  }

  /* Weekend highlighting */
  .day.weekend{
    /* Background = cor de fundo. Quanto MAIOR o √∫ltimo n√∫mero (.05), mais forte a cor */
    background:rgba(99,102,241,.03);  /* Reduzido de .05 para .03 */
    
    /* Border = borda. Primeiro n√∫mero = espessura em pixels */
    border:1px solid rgba(99,102,241,.1);  /* Reduzido de .15 para .1 */
  }

  .day.weekend:hover{
    /* Cor quando passa o mouse */
    background:rgba(99,102,241,.05);  /* Reduzido de .1 para .05 */
    border-color:rgba(99,102,241,.15);  /* Reduzido de .25 para .15 */
  }

  .day.weekend .day-number{
    /* Cor do n√∫mero do dia */
    color:var(--text-secondary);  /* Mudado de primary-light para cinza claro */
    
    /* Peso da fonte: 400=normal, 700=bold, 900=extra bold */
    font-weight:700;  /* Reduzido de 800 para 700 */
  }

  .day.weekend::before{
    /* Faixa colorida no topo do dia */
    content:'';
    position:absolute;
    top:0;
    left:0;
    right:0;
    height:2px;  /* Reduzido de 3px para 2px */
    background:linear-gradient(90deg, var(--primary), var(--accent));
    
    /* Opacity = transpar√™ncia. 0=invis√≠vel, 1=totalmente vis√≠vel */
    opacity:.2;  /* Reduzido de .6 para .2 - muito mais sutil! */
  }

  .day-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:8px;
    padding-bottom:6px;
    border-bottom:1px solid var(--border);
  }

  .day-number{
    font-weight:700;
    font-size:14px;
    color:var(--text-secondary);
    transition:all .2s;
  }

  .day:hover .day-number{
    transform:scale(1.1);
    color:var(--primary);
  }

  .day.other-month .day-number{
    color:var(--text-dim);
    opacity:.5;
  }

  .day.today{
    background:rgba(99,102,241,.05);
  }

  .day.today .day-number{
    color:var(--primary);
    font-weight:800;
  }

  .today-tag{
    font-size:10px;
    font-weight:700;
    padding:4px 8px;
    border-radius:999px;
    background:rgba(99,102,241,.15);
    color:var(--primary);
    border:1px solid rgba(99,102,241,.3);
    animation:pulse 2s ease-in-out infinite;
    transition:all .3s cubic-bezier(.4,0,.2,1);
    position:relative;
  }

  .day:hover .today-tag{
    transform:translateX(-40px);
    opacity:.6;
  }

  @keyframes pulse{
    0%, 100%{ opacity:1; }
    50%{ opacity:.8; }
  }

  /* Events - COLORFUL CARDS */
  .event{
    position:relative;
    border-radius:8px;
    background:var(--accent);
    padding:10px 12px;
    margin-bottom:6px;
    cursor:pointer;
    transition:all .25s cubic-bezier(.4,0,.2,1);
    font-size:12px;
    box-shadow:0 2px 8px rgba(0,0,0,.2);
    overflow:hidden;
  }

  .event::before{
    content:'';
    position:absolute;
    inset:0;
    background:linear-gradient(135deg, rgba(255,255,255,.15), transparent 60%);
    opacity:0;
    transition:opacity .25s;
  }

  .event:hover{
    transform:translateY(-4px) scale(1.03);
    box-shadow:0 8px 24px rgba(0,0,0,.4);
  }

  .event:hover::before{
    opacity:1;
  }

  .event:active{
    transform:translateY(-2px) scale(1.01);
  }

  .event-title{
    font-weight:700;
    font-size:12px;
    color:#ffffff;
    margin-bottom:6px;
    line-height:1.3;
    text-shadow:0 1px 2px rgba(0,0,0,.2);
  }

  .event-meta{
    display:flex;
    gap:6px;
    flex-wrap:wrap;
    color:rgba(255,255,255,.9);
    font-size:10px;
    font-weight:600;
  }

  .event-meta span{
    display:inline-flex;
    align-items:center;
    gap:4px;
    padding:2px 6px;
    border-radius:4px;
    background:rgba(0,0,0,.15);
    backdrop-filter:blur(10px);
  }

  .event-status{
    background:rgba(255,255,255,.18);
    color:#fff;
  }

  /* Modal */
  .modal-overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.7);
    backdrop-filter:blur(8px);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:1000;
    padding:20px;
    animation:fadeIn .3s ease;
  }

  .modal-overlay.show{
    display:flex;
  }

  .modal{
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius-lg);
    width:100%;
    max-width:900px;
    max-height:90vh;
    overflow-y:auto;
    padding:32px;
    scrollbar-width:thin;
    scrollbar-color:var(--border) transparent;
    animation:modalSlide .4s cubic-bezier(.16,1,.3,1);
  }

  @keyframes modalSlide{
    from{ opacity:0; transform:scale(.95) translateY(20px); }
    to{ opacity:1; transform:scale(1) translateY(0); }
  }

  .modal::-webkit-scrollbar{
    width:8px;
  }

  .modal::-webkit-scrollbar-track{
    background:transparent;
  }

  .modal::-webkit-scrollbar-thumb{
    background:var(--border);
    border-radius:10px;
  }

  .modal-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:24px;
    padding-bottom:16px;
    border-bottom:1px solid var(--border);
  }

  .modal-title{
    font-family:'Space Grotesk', sans-serif;
    font-size:22px;
    font-weight:600;
    color:var(--text);
  }

  .modal-subtitle{
    font-size:14px;
    color:var(--text-dim);
    margin-top:4px;
  }

  .close-btn{
    width:36px;
    height:36px;
    border-radius:var(--radius-sm);
    border:1px solid var(--border);
    background:var(--surface-elevated);
    cursor:pointer;
    display:grid;
    place-items:center;
    font-size:18px;
    transition:all .2s;
  }

  .close-btn:hover{
    border-color:var(--danger);
    background:rgba(239,68,68,.1);
    color:var(--danger);
  }

  /* Form */
  .form-section{
    padding:20px;
    border-radius:var(--radius-md);
    border:1px solid var(--border);
    background:var(--surface-elevated);
    margin-bottom:16px;
  }

  .section-label{
    font-size:13px;
    font-weight:700;
    color:var(--text);
    margin-bottom:16px;
    padding-bottom:12px;
    border-bottom:1px solid var(--border);
    letter-spacing:0.3px;
  }

  .form-row{
    display:grid;
    gap:12px;
    margin-bottom:12px;
  }

  .form-row.cols-2{grid-template-columns:1fr 1fr}
  .form-row.cols-3{grid-template-columns:repeat(3, 1fr)}
  .form-row.cols-4{grid-template-columns:repeat(4, 1fr)}
  .form-row.cols-5{grid-template-columns:repeat(5, 1fr)}

  @media(max-width:768px){
    .form-row.cols-2,
    .form-row.cols-3,
    .form-row.cols-4,
    .form-row.cols-5{
      grid-template-columns:1fr;
    }
  }

  .field{
    display:flex;
    flex-direction:column;
    gap:6px;
    min-width:0;
    overflow:hidden;
  }

  .field label{
    font-size:12px;
    font-weight:600;
    color:var(--text-secondary);
    letter-spacing:0.3px;
    text-transform:uppercase;
  }

  .input,
  .textarea,
  select.input{
    border-radius:var(--radius-sm);
    border:1px solid var(--border);
    background:var(--bg-secondary);
    color:var(--text);
    padding:10px 14px;
    outline:none;
    font-weight:500;
    font-size:14px;
    font-family:'Inter', sans-serif;
    transition:all .2s;
    width:100%;
    max-width:100%;
  }

  .input{
    height:42px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
  }

  .textarea{
    min-height:80px;
    resize:vertical;
  }

  select.input{
    appearance:none;
    -webkit-appearance:none;
    -moz-appearance:none;
    background-color:var(--bg-secondary);
    background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 7.5L10 12.5L15 7.5' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat:no-repeat;
    background-position:right 12px center;
    background-size:16px;
    padding-right:40px;
    cursor:pointer;
    font-size:14px;
    font-weight:600;
    text-transform:uppercase;
  }

  select.input option{
    background:var(--surface);
    color:var(--text);
    padding:12px 16px;
    font-size:14px;
    font-weight:600;
    text-transform:none;
  }

  .input:focus,
  .textarea:focus,
  select.input:focus{
    border-color:var(--primary);
    background:var(--surface);
    box-shadow:0 0 0 3px rgba(99,102,241,.15);
  }

  .input:hover,
  .textarea:hover,
  select.input:hover{
    border-color:var(--border-light);
    background:var(--surface);
  }

  /* Highlight important fields */
  .field-highlight{
    position:relative;
  }

  .field-highlight::before{
    content:'';
    position:absolute;
    inset:-2px;
    border-radius:calc(var(--radius-sm) + 2px);
    background:linear-gradient(135deg, var(--primary), var(--accent));
    opacity:0;
    transition:opacity .2s;
    z-index:-1;
  }

  .field-highlight:focus-within::before{
    opacity:.15;
  }

  .field-highlight label{
    color:var(--primary-light);
    font-weight:700;
    font-size:13px;
  }

  .field-highlight .input,
  .field-highlight .textarea,
  .field-highlight select.input{
    border-color:rgba(99,102,241,.3);
    background:var(--surface);
    font-weight:600;
    font-size:15px;
    text-transform:uppercase;
  }

  .field-highlight select.input option{
    text-transform:none;
    font-size:14px;
  }

  .field-highlight .input:focus,
  .field-highlight .textarea:focus,
  .field-highlight select.input:focus{
    border-color:var(--primary);
    box-shadow:0 0 0 4px rgba(99,102,241,.2);
  }

  /* Toggle */
  .toggle-field{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:16px;
    border-radius:var(--radius-md);
    border:1px solid var(--border);
    background:var(--surface);
  }

  .toggle-label{
    font-weight:600;
    font-size:14px;
    color:var(--text);
  }

  .toggle{
    width:48px;
    height:28px;
    border-radius:999px;
    background:var(--surface-elevated);
    border:1px solid var(--border);
    position:relative;
    cursor:pointer;
    transition:all .25s;
  }

  .toggle::after{
    content:'';
    position:absolute;
    top:3px;
    left:3px;
    width:20px;
    height:20px;
    border-radius:50%;
    background:#fff;
    transition:all .25s;
    box-shadow:0 2px 4px rgba(0,0,0,.2);
  }

  .toggle.on{
    background:var(--success);
    border-color:var(--success);
  }

  .toggle.on::after{
    left:23px;
  }

  /* Actions */
  .modal-actions{
    display:flex;
    gap:12px;
    margin-top:24px;
    padding-top:20px;
    border-top:1px solid var(--border);
  }

  .btnDanger{
    background:rgba(239,68,68,.1);
    border-color:rgba(239,68,68,.3);
    color:var(--danger);
  }

  .btnDanger:hover{
    background:rgba(239,68,68,.15);
    border-color:var(--danger);
  }

  /* Responsive */
  @media(max-width:1024px){
    .search{
      min-width:280px;
    }
  }

  @media(max-width:768px){
    .container{
      padding:16px;
    }

    .header{
      padding:16px 20px;
      flex-direction:column;
      align-items:stretch;
    }

    .brand{
      flex-direction:column;
      gap:12px;
    }

    .header-actions{
      width:100%;
    }

    .search{
      width:100%;
      min-width:auto;
    }

    .toolbar{
      padding:16px;
      flex-direction:column;
      align-items:stretch;
    }

    .toolbar-left,
    .toolbar-center,
    .toolbar-right{
      width:100%;
      justify-content:center;
    }

    .days{
      min-height:500px;
    }

    .day{
      min-height:100px;
      padding:8px;
    }

    .modal{
      padding:24px;
    }
  }
</style>
</head>

<body>
<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="brand">
      <div class="logo">
        <span>NOBREA</span>
        <span class="logo-k">
          K
          <svg class="logo-lightning" viewBox="0 0 100 180" fill="none">
            <path d="M50 0L14 90H40L25 180L75 63H50L65 18L50 0Z" fill="#ffd700"/>
          </svg>
        </span>
      </div>
      <div class="header-titles">
        <h1>Agenda</h1>
        <div class="header-sub">Gest√£o de Compromissos</div>
      </div>
    </div>

    <div class="header-actions">
      <div class="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
          <path d="M16 16L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input id="searchInput" placeholder="Buscar evento, local, contratante..." />
        <button class="search-clear" id="clearSearch" aria-label="Limpar busca">‚úï</button>
      </div>

      <button class="btn" id="btnToday">Hoje</button>
      <button class="btn btnPrimary" id="btnNew">+ Novo</button>
      <a class="btn" href="index.html" style="text-decoration:none">‚Üê Home</a>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="toolbar-left">
      <select id="artistFilter" class="select">
        <option value="ALL">Todos Artistas</option>
      </select>

      <div class="chips" id="statusChips">
        <!-- Chips will be inserted here -->
      </div>
    </div>

    <div class="toolbar-center">
      <div class="month-nav">
        <div class="nav-btn" id="prevMonth" role="button" tabindex="0" aria-label="M√™s anterior">‚Üê</div>
        <div class="month-title" id="monthLabel">‚Äî</div>
        <div class="nav-btn" id="nextMonth" role="button" tabindex="0" aria-label="Pr√≥ximo m√™s">‚Üí</div>
      </div>
    </div>

    <div class="toolbar-right">
      <div class="pill" id="countLabel">0 eventos</div>
    </div>
  </div>

  <!-- Calendar -->
  <div class="calendar">
    <div class="weekdays">
      <div>Seg</div><div>Ter</div><div>Qua</div><div>Qui</div><div>Sex</div><div>S√°b</div><div>Dom</div>
    </div>
    <div class="days" id="daysGrid"></div>
    <div class="empty-state" id="emptyState">Nenhum evento para este m√™s com os filtros atuais.</div>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="modalTitle">Novo Evento</div>
        <div class="modal-subtitle" id="modalSubtitle">‚Äî</div>
      </div>
      <div class="close-btn" id="closeModal" role="button" tabindex="0" aria-label="Fechar modal">‚úï</div>
    </div>

    <div class="modal-body">
      <!-- Main Info -->
      <div class="form-section">
        <div class="section-label">üìç Informa√ß√µes Principais</div>
        
        <div class="form-row cols-5">
          <div class="field field-highlight">
            <label>üìÖ Data</label>
            <input class="input" id="fDate" type="date" />
          </div>
          <div class="field field-highlight">
            <label>‚è∞ Hora In√≠cio</label>
            <input class="input" id="fTimeStart" type="time" />
          </div>
          <div class="field field-highlight">
            <label>‚è±Ô∏è Hora Fim</label>
            <input class="input" id="fTimeEnd" type="time" />
          </div>
          <div class="field field-highlight">
            <label>üèôÔ∏è Cidade</label>
            <input class="input" id="fCity" placeholder="Rio de Janeiro" />
          </div>
          <div class="field field-highlight">
            <label>üìå Estado</label>
            <input class="input" id="fState" placeholder="RJ" maxlength="2" style="text-transform:uppercase" />
          </div>
        </div>

        <div class="field field-highlight">
          <label>üìç Local do Evento</label>
          <input class="input" id="fVenue" placeholder="Nome do local" />
        </div>
      </div>

      <!-- Event Details -->
      <div class="form-section">
        <div class="section-label">üé§ Detalhes do Evento</div>
        
        <div class="field field-highlight">
          <label>üéØ Nome do Evento</label>
          <input class="input" id="fTitle" placeholder="Ex: Show ‚Ä¢ Camarote" />
        </div>

        <div class="form-row cols-4">
          <div class="field">
            <label>Tipo</label>
            <select class="input" id="fEventType">
              <option value="">Selecione</option>
              <option value="show_cenario">Show c/ Cen√°rio</option>
              <option value="show">Show</option>
              <option value="participacao">Participa√ß√£o</option>
            </select>
          </div>
          <div class="field">
            <label>Ingresso</label>
            <select class="input" id="fTicketType">
              <option value="">Selecione</option>
              <option value="bilheteria">Bilheteria</option>
              <option value="cache">Cach√™</option>
            </select>
          </div>
          <div class="field field-highlight">
            <label>üé§ Artista</label>
            <select class="input" id="fArtist">
              <option value="AX">Artista X</option>
              <option value="AY">Artista Y</option>
              <option value="AZ">Artista Z</option>
            </select>
          </div>
          <div class="field field-highlight">
            <label>üéØ Status</label>
            <select class="input" id="fStatus">
              <option value="CONFIRMADO">Confirmado</option>
              <option value="RESERVADO">Reservado</option>
              <option value="NEGOCIANDO">Negociando</option>
              <option value="LEMBRETE">Lembrete</option>
              <option value="OUTROS">Outros</option>
            </select>
          </div>
        </div>

        <div class="form-row cols-2">
          <div class="field">
            <label>‚è±Ô∏è Dura√ß√£o</label>
            <input class="input" id="fDuration" placeholder="00:30h" />
          </div>
          <div class="field field-highlight">
            <label>üí∞ Cach√™</label>
            <input class="input" id="fCache" placeholder="15K" />
          </div>
        </div>
      </div>

      <!-- Contacts -->
      <div class="form-section">
        <div class="section-label">üë• Contatos</div>
        
        <div class="form-row cols-4">
          <div class="field">
            <label>Empresa</label>
            <input class="input" id="fCompany" />
          </div>
          <div class="field field-highlight">
            <label>üë§ Contratante</label>
            <input class="input" id="fClient" />
          </div>
          <div class="field">
            <label>Contato</label>
            <input class="input" id="fContact" />
          </div>
          <div class="field field-highlight">
            <label>üìû Telefone</label>
            <input class="input" id="fPhone" placeholder="(00) 00000-0000" />
          </div>
        </div>

        <div class="form-row cols-2">
          <div class="field">
            <label>üìß E-mail</label>
            <input class="input" id="fEmail" type="email" />
          </div>
          <div class="field">
            <label>Despesas</label>
            <input class="input" id="fExpenses" />
          </div>
        </div>
      </div>

      <!-- Additional -->
      <div class="form-section">
        <div class="section-label">üìã Informa√ß√µes Adicionais</div>
        
        <div class="field">
          <label>Observa√ß√µes</label>
          <textarea class="textarea" id="fNotes" placeholder="Notas e observa√ß√µes..."></textarea>
        </div>

        <div class="toggle-field">
          <div class="toggle-label">Contrato Enviado</div>
          <div class="toggle" id="fContract"></div>
        </div>
      </div>

      <!-- Actions -->
      <div class="modal-actions">
        <button class="btn btnDanger" id="btnDelete">Deletar</button>
        <button class="btn" id="btnDuplicate">Duplicar</button>
        <button class="btn btnPrimary" id="btnSave" style="flex:1">Salvar</button>
      </div>
    </div>
  </div>
</div>

<script>
  const ARTISTS = [
    { id:"AX", name:"Artista X", color:"#f59e0b" },
    { id:"AY", name:"Artista Y", color:"#06b6d4" },
    { id:"AZ", name:"Artista Z", color:"#6366f1" }
  ];

  const STATUSES = [
    { id:"CONFIRMADO", label:"Confirmado", color:"#10b981" },
    { id:"RESERVADO", label:"Reservado", color:"#6366f1" },
    { id:"NEGOCIANDO", label:"Negociando", color:"#f59e0b" },
    { id:"LEMBRETE", label:"Lembrete", color:"#06b6d4" },
    { id:"OUTROS", label:"Outros", color:"#64748b" }
  ];

  let events = JSON.parse(localStorage.getItem('agendaEvents')) || [
    {
      id: "demo1",
      date: "2026-02-05",
      timeStart: "20:00",
      timeEnd: "22:00",
      title: "Show ‚Ä¢ Camarote Premium",
      city: "Rio de Janeiro",
      state: "RJ",
      venue: "Sapuca√≠",
      eventType: "show_cenario",
      ticketType: "cache",
      status: "CONFIRMADO",
      artist: "AZ",
      duration: "01:30h",
      cache: "25K",
      company: "Produtora XYZ",
      client: "Jo√£o Silva",
      contact: "Maria Santos",
      phone: "(21) 99999-8888",
      email: "contato@empresa.com",
      expenses: "Transporte, hospedagem",
      contractSent: true,
      notes: "Rider confirmado, soundcheck √†s 18h"
    },
    {
      id: "demo2",
      date: "2026-02-08",
      timeStart: "21:30",
      timeEnd: "23:00",
      title: "Evento ‚Ä¢ Pub Central",
      city: "S√£o Paulo",
      state: "SP",
      venue: "Rock Bar Downtown",
      eventType: "show",
      ticketType: "bilheteria",
      status: "RESERVADO",
      artist: "AX",
      duration: "01:00h",
      cache: "15K",
      company: "Bar Central",
      client: "Pedro Costa",
      contact: "",
      phone: "(11) 98888-7777",
      email: "",
      expenses: "",
      contractSent: false,
      notes: "Aguardando confirma√ß√£o do local"
    },
    {
      id: "demo3",
      date: "2026-02-12",
      timeStart: "19:00",
      timeEnd: "20:00",
      title: "Entrevista ‚Ä¢ R√°dio Mix",
      city: "Belo Horizonte",
      state: "MG",
      venue: "Est√∫dio R√°dio Mix",
      eventType: "participacao",
      ticketType: "",
      status: "LEMBRETE",
      artist: "AY",
      duration: "00:45h",
      cache: "",
      company: "R√°dio Mix",
      client: "Ana Rodrigues",
      contact: "Carlos Mendes",
      phone: "(31) 97777-6666",
      email: "producao@radiomix.com",
      expenses: "",
      contractSent: false,
      notes: "Programa ao vivo, chegar 30min antes"
    },
    {
      id: "demo4",
      date: "2026-02-15",
      timeStart: "22:00",
      timeEnd: "01:00",
      title: "Show ‚Ä¢ Festival de Ver√£o",
      city: "Salvador",
      state: "BA",
      venue: "Arena Fonte Nova",
      eventType: "show_cenario",
      ticketType: "cache",
      status: "CONFIRMADO",
      artist: "AZ",
      duration: "02:00h",
      cache: "50K",
      company: "Festival Prod.",
      client: "Roberto Lima",
      contact: "Julia Alves",
      phone: "(71) 96666-5555",
      email: "festival@prod.com",
      expenses: "Voos, hotel 4 estrelas, rider completo",
      contractSent: true,
      notes: "Palco principal, hor√°rio nobre. Equipe t√©cnica completa dispon√≠vel."
    },
    {
      id: "demo5",
      date: "2026-02-18",
      timeStart: "20:30",
      timeEnd: "22:30",
      title: "Show ‚Ä¢ Casa de Shows",
      city: "Curitiba",
      state: "PR",
      venue: "Live Music Hall",
      eventType: "show",
      ticketType: "bilheteria",
      status: "NEGOCIANDO",
      artist: "AX",
      duration: "01:30h",
      cache: "18K",
      company: "Live Events",
      client: "Fernando Souza",
      contact: "",
      phone: "(41) 95555-4444",
      email: "",
      expenses: "",
      contractSent: false,
      notes: "Negociando valor do cach√™ e despesas"
    },
    {
      id: "demo6",
      date: "2026-02-22",
      timeStart: "23:00",
      timeEnd: "02:00",
      title: "Show ‚Ä¢ Carnaval Priv√™",
      city: "Florian√≥polis",
      state: "SC",
      venue: "Beach Club Premium",
      eventType: "show_cenario",
      ticketType: "cache",
      status: "CONFIRMADO",
      artist: "AY",
      duration: "02:30h",
      cache: "35K",
      company: "Priv√™ Eventos",
      client: "Marcela Fernandes",
      contact: "Lucas Martins",
      phone: "(48) 94444-3333",
      email: "prive@eventos.com",
      expenses: "Transfer VIP, hotel resort",
      contractSent: true,
      notes: "Evento exclusivo, dress code white party"
    },
    {
      id: "demo7",
      date: "2026-02-26",
      timeStart: "15:00",
      timeEnd: "16:00",
      title: "Reuni√£o ‚Ä¢ Planejamento Mar√ßo",
      city: "Online",
      state: "",
      venue: "Zoom Meeting",
      eventType: "",
      ticketType: "",
      status: "LEMBRETE",
      artist: "AZ",
      duration: "01:00h",
      cache: "",
      company: "",
      client: "",
      contact: "",
      phone: "",
      email: "",
      expenses: "",
      contractSent: false,
      notes: "Reuni√£o de planejamento para agenda de mar√ßo"
    },
    {
      id: "demo8",
      date: "2026-02-28",
      timeStart: "21:00",
      timeEnd: "23:30",
      title: "Show ‚Ä¢ Encerramento do M√™s",
      city: "Porto Alegre",
      state: "RS",
      venue: "Anfiteatro P√¥r do Sol",
      eventType: "show",
      ticketType: "cache",
      status: "CONFIRMADO",
      artist: "AX",
      duration: "02:00h",
      cache: "22K",
      company: "Sul Produ√ß√µes",
      client: "Tatiana Oliveira",
      contact: "Rodrigo Pires",
      phone: "(51) 93333-2222",
      email: "sulprod@mail.com",
      expenses: "Voo, hotel",
      contractSent: true,
      notes: "Show ao ar livre, ter plano B para chuva"
    }
  ];
  
  const state = {
    viewDate: new Date(),
    statusFilter: new Set(),
    artistFilter: "ALL",
    query: "",
    selectedId: null
  };

  // Initialize
  function init(){
    // Populate artist filter
    const artistSelect = document.getElementById('artistFilter');
    artistSelect.innerHTML = `<option value="ALL">Todos Artistas</option>` +
      ARTISTS.map(a => `<option value="${a.id}">${a.name}</option>`).join('');
    artistSelect.addEventListener('change', ()=> {
      state.artistFilter = artistSelect.value;
      render();
    });

    // Create status chips
    const statusChips = document.getElementById('statusChips');
    statusChips.innerHTML = STATUSES.map(s => `
      <div class="chip" data-status="${s.id}" role="button" tabindex="0" aria-pressed="false">
        <span class="dot" style="background:${s.color}"></span>
        <span>${s.label}</span>
      </div>
    `).join('');

    statusChips.querySelectorAll('.chip').forEach(chip => {
      const toggleChip = () => {
        const status = chip.getAttribute('data-status');
        if(state.statusFilter.has(status)){
          state.statusFilter.delete(status);
          chip.classList.remove('active');
          chip.setAttribute('aria-pressed', 'false');
        } else {
          state.statusFilter.add(status);
          chip.classList.add('active');
          chip.setAttribute('aria-pressed', 'true');
        }
        render();
      };
      chip.addEventListener('click', toggleChip);
      chip.addEventListener('keydown', (event) => {
        if(event.key === 'Enter' || event.key === ' '){
          event.preventDefault();
          toggleChip();
        }
      });
    });

    // Event listeners
    const prevBtn = document.getElementById('prevMonth');
    const nextBtn = document.getElementById('nextMonth');
    const closeBtn = document.getElementById('closeModal');

    prevBtn.addEventListener('click', ()=> shiftMonth(-1));
    nextBtn.addEventListener('click', ()=> shiftMonth(1));
    document.getElementById('btnToday').addEventListener('click', goToday);
    document.getElementById('btnNew').addEventListener('click', ()=> openModal());
    closeBtn.addEventListener('click', closeModal);

    [prevBtn, nextBtn, closeBtn].forEach((btn) => {
      btn.addEventListener('keydown', (event) => {
        if(event.key === 'Enter' || event.key === ' '){
          event.preventDefault();
          btn.click();
        }
      });
    });
    document.getElementById('modalOverlay').addEventListener('click', (e)=> {
      if(e.target.id === 'modalOverlay') closeModal();
    });

    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const searchWrap = document.querySelector('.search');

    const updateSearchState = () => {
      const hasValue = searchInput.value.trim().length > 0;
      searchWrap.classList.toggle('has-value', hasValue);
    };

    searchInput.addEventListener('input', (e)=> {
      state.query = e.target.value.toLowerCase();
      updateSearchState();
      render();
    });
    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      state.query = '';
      updateSearchState();
      searchInput.focus();
      render();
    });
    updateSearchState();

    document.getElementById('fContract').addEventListener('click', function(){
      this.classList.toggle('on');
    });

    document.getElementById('btnSave').addEventListener('click', saveEvent);
    document.getElementById('btnDelete').addEventListener('click', deleteEvent);
    document.getElementById('btnDuplicate').addEventListener('click', duplicateEvent);

    render();
  }

  function render(){
    const y = state.viewDate.getFullYear();
    const m = state.viewDate.getMonth();

    // Update month label
    const monthName = state.viewDate.toLocaleString('pt-BR', {month:'long', year:'numeric'});
    document.getElementById('monthLabel').textContent = monthName.charAt(0).toUpperCase() + monthName.slice(1);

    // Filter events
    const filtered = events.filter(matchesFilters);
    const monthEvents = filtered.filter(e => {
      const d = new Date(e.date);
      return d.getFullYear() === y && d.getMonth() === m;
    });

    document.getElementById('countLabel').textContent = `${monthEvents.length} eventos`;
    document.getElementById('emptyState').classList.toggle('show', monthEvents.length === 0);

    // Generate calendar
    const firstDay = new Date(y, m, 1);
    let startDow = firstDay.getDay();
    // Adjust for Monday start (0=Sunday -> 6, 1=Monday -> 0, etc)
    startDow = startDow === 0 ? 6 : startDow - 1;
    const cells = [];

    for(let i = 0; i < 42; i++){
      const dayIndex = i - startDow + 1;
      const date = new Date(y, m, dayIndex);
      const inMonth = date.getMonth() === m;
      const dateStr = formatDate(date);
      const isToday = isSameDay(date, new Date());
      const dayEvents = filtered.filter(e => e.date === dateStr);

      cells.push({date, dateStr, inMonth, isToday, dayEvents});
    }

    // Render days
    const grid = document.getElementById('daysGrid');
    grid.innerHTML = cells.map(cell => {
      const classes = ['day'];
      if(!cell.inMonth) classes.push('other-month');
      if(cell.isToday) classes.push('today');
      
      // Detect weekend (Sunday=0, Saturday=6)
      const dayOfWeek = cell.date.getDay();
      if(dayOfWeek === 0 || dayOfWeek === 6) classes.push('weekend');
      if(cell.dayEvents.length) classes.push('has-events');

      const todayTag = cell.isToday ? '<span class="today-tag">Hoje</span>' : '';
      const eventsHtml = cell.dayEvents.map(e => renderEvent(e)).join('');

      return `
        <div class="${classes.join(' ')}" data-date="${cell.dateStr}" tabindex="0">
          <div class="day-header">
            <div class="day-number">${cell.date.getDate()}</div>
            ${todayTag}
          </div>
          ${eventsHtml}
        </div>
      `;
    }).join('');

    // Add click handlers
    grid.querySelectorAll('.event').forEach(el => {
      el.addEventListener('click', (e)=> {
        e.stopPropagation();
        const id = el.getAttribute('data-id');
        openModal(id);
      });
    });

    grid.querySelectorAll('.day').forEach(el => {
      const openDay = () => {
        const date = el.getAttribute('data-date');
        openModal(null, date);
      };
      el.addEventListener('click', openDay);
      el.addEventListener('keydown', (event) => {
        if(event.key === 'Enter' || event.key === ' '){
          event.preventDefault();
          openDay();
        }
      });
    });
  }

  function renderEvent(event){
    const artist = ARTISTS.find(a => a.id === event.artist) || ARTISTS[0];
    const time = event.timeStart || '';
    const location = [event.venue, event.city].filter(x=>x).join(' ‚Ä¢ ');
    const status = STATUSES.find(s => s.id === event.status);

    return `
      <div class="event" style="background:${artist.color}" data-id="${event.id}">
        <div class="event-title">${escapeHtml(event.title || 'Evento')}</div>
        <div class="event-meta">
          ${status ? `<span class="event-status">‚Ä¢ ${status.label}</span>` : ''}
          ${time ? `<span>‚è± ${time}</span>` : ''}
          ${location ? `<span>üìç ${escapeHtml(location)}</span>` : ''}
        </div>
      </div>
    `;
  }

  function openModal(id = null, date = null){
    const modal = document.getElementById('modalOverlay');
    
    if(id){
      // Edit mode
      const event = events.find(e => e.id === id);
      if(!event) return;

      state.selectedId = id;
      document.getElementById('modalTitle').textContent = 'Editar Evento';
      
      const artist = ARTISTS.find(a => a.id === event.artist);
      const status = STATUSES.find(s => s.id === event.status);
      document.getElementById('modalSubtitle').textContent = `${artist?.name || ''} ‚Ä¢ ${status?.label || ''}`;

      // Fill form
      document.getElementById('fDate').value = event.date || '';
      document.getElementById('fTimeStart').value = event.timeStart || '';
      document.getElementById('fTimeEnd').value = event.timeEnd || '';
      document.getElementById('fCity').value = event.city || '';
      document.getElementById('fState').value = event.state || '';
      document.getElementById('fVenue').value = event.venue || '';
      document.getElementById('fTitle').value = event.title || '';
      document.getElementById('fEventType').value = event.eventType || '';
      document.getElementById('fTicketType').value = event.ticketType || '';
      document.getElementById('fArtist').value = event.artist || ARTISTS[0].id;
      document.getElementById('fStatus').value = event.status || 'RESERVADO';
      document.getElementById('fDuration').value = event.duration || '';
      document.getElementById('fCache').value = event.cache || '';
      document.getElementById('fCompany').value = event.company || '';
      document.getElementById('fClient').value = event.client || '';
      document.getElementById('fContact').value = event.contact || '';
      document.getElementById('fPhone').value = event.phone || '';
      document.getElementById('fEmail').value = event.email || '';
      document.getElementById('fExpenses').value = event.expenses || '';
      document.getElementById('fNotes').value = event.notes || '';
      document.getElementById('fContract').classList.toggle('on', event.contractSent || false);
    } else {
      // New event mode
      state.selectedId = null;
      document.getElementById('modalTitle').textContent = 'Novo Evento';
      document.getElementById('modalSubtitle').textContent = '‚Äî';

      // Clear form
      document.getElementById('fDate').value = date || formatDate(new Date());
      document.getElementById('fTimeStart').value = '20:00';
      document.getElementById('fTimeEnd').value = '22:00';
      document.getElementById('fCity').value = '';
      document.getElementById('fState').value = '';
      document.getElementById('fVenue').value = '';
      document.getElementById('fTitle').value = '';
      document.getElementById('fEventType').value = '';
      document.getElementById('fTicketType').value = '';
      document.getElementById('fArtist').value = state.artistFilter !== 'ALL' ? state.artistFilter : ARTISTS[0].id;
      document.getElementById('fStatus').value = 'RESERVADO';
      document.getElementById('fDuration').value = '';
      document.getElementById('fCache').value = '';
      document.getElementById('fCompany').value = '';
      document.getElementById('fClient').value = '';
      document.getElementById('fContact').value = '';
      document.getElementById('fPhone').value = '';
      document.getElementById('fEmail').value = '';
      document.getElementById('fExpenses').value = '';
      document.getElementById('fNotes').value = '';
      document.getElementById('fContract').classList.remove('on');
    }

    modal.classList.add('show');
  }

  function closeModal(){
    document.getElementById('modalOverlay').classList.remove('show');
    state.selectedId = null;
  }

  function saveEvent(){
    const data = {
      date: document.getElementById('fDate').value,
      timeStart: document.getElementById('fTimeStart').value,
      timeEnd: document.getElementById('fTimeEnd').value,
      city: document.getElementById('fCity').value,
      state: document.getElementById('fState').value,
      venue: document.getElementById('fVenue').value,
      title: document.getElementById('fTitle').value,
      eventType: document.getElementById('fEventType').value,
      ticketType: document.getElementById('fTicketType').value,
      artist: document.getElementById('fArtist').value,
      status: document.getElementById('fStatus').value,
      duration: document.getElementById('fDuration').value,
      cache: document.getElementById('fCache').value,
      company: document.getElementById('fCompany').value,
      client: document.getElementById('fClient').value,
      contact: document.getElementById('fContact').value,
      phone: document.getElementById('fPhone').value,
      email: document.getElementById('fEmail').value,
      expenses: document.getElementById('fExpenses').value,
      notes: document.getElementById('fNotes').value,
      contractSent: document.getElementById('fContract').classList.contains('on')
    };

    if(state.selectedId){
      // Update
      const idx = events.findIndex(e => e.id === state.selectedId);
      if(idx >= 0) events[idx] = {...events[idx], ...data};
    } else {
      // Create
      events.push({id: generateId(), ...data});
    }

    localStorage.setItem('agendaEvents', JSON.stringify(events));
    closeModal();
    render();
  }

  function deleteEvent(){
    if(!state.selectedId) return;
    if(!confirm('Deletar este evento?')) return;

    events = events.filter(e => e.id !== state.selectedId);
    localStorage.setItem('agendaEvents', JSON.stringify(events));
    closeModal();
    render();
  }

  function duplicateEvent(){
    if(!state.selectedId) return;

    const event = events.find(e => e.id === state.selectedId);
    if(!event) return;

    const newEvent = {...event, id: generateId(), title: event.title + ' (C√≥pia)'};
    events.push(newEvent);
    localStorage.setItem('agendaEvents', JSON.stringify(events));
    closeModal();
    render();
  }

  function shiftMonth(delta){
    const d = state.viewDate;
    state.viewDate = new Date(d.getFullYear(), d.getMonth() + delta, 1);
    render();
  }

  function goToday(){
    state.viewDate = new Date();
    render();
  }

  function matchesFilters(event){
    if(state.artistFilter !== 'ALL' && event.artist !== state.artistFilter) return false;
    if(state.statusFilter.size > 0 && !state.statusFilter.has(event.status)) return false;
    if(state.query){
      const text = [
        event.title, event.city, event.venue, event.client, event.notes
      ].join(' ').toLowerCase();
      if(!text.includes(state.query)) return false;
    }
    return true;
  }

  function formatDate(date){
    const y = date.getFullYear();
    const m = String(date.getMonth() + 1).padStart(2, '0');
    const d = String(date.getDate()).padStart(2, '0');
    return `${y}-${m}-${d}`;
  }

  function isSameDay(a, b){
    return a.getFullYear() === b.getFullYear() &&
           a.getMonth() === b.getMonth() &&
           a.getDate() === b.getDate();
  }

  function escapeHtml(str){
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  function generateId(){
    return Date.now().toString(36) + Math.random().toString(36).substr(2);
  }

  init();
</script>
</body>
</html>
